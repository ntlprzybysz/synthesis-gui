{% load static %}
<!doctype html>
<html lang="en">

<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        {% block title %}
        <title>Speech synthesis</title>
        {% endblock %}
        <link rel="icon" type="image/x-icon" href="{% static 'graphics/favicon.ico' %}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{% static 'base.css' %}">
        <script src="{% static 'main.js' %}"></script>
        <script src="{% static 'exampleHandler.js' %}"></script>
        <script src="{% static 'fileHandler.js' %}"></script>
        <script src="{% static 'modelHandler.js' %}"></script>
        <script src="{% static 'progressHandler.js' %}"></script>
</head>

<body>
        {% block sidebar %}
        <div class="header">
                <nav class="navbar navbar-expand-lg" style="background-color: #f8f9fa;">
                <div class="container-fluid mt-3 mb-3">
                        <a class="navbar-brand" style="text-decoration: none; font-size: xx-large;" href="{% url 'home' %}">
                                <img src="{% static 'graphics/logo_transparent_500x500.png' %}" alt="Logo of the website" width="90" height="auto"
                                class="d-inline-block align-middle" style="margin-right: 1rem;">
                                <h1 style="font-size: xx-large; display: inline;">Speech synthesis</h1>
                        </a>

                        <ul class="navbar-nav">
                                <li class="nav-item">
                                        <a class="nav-link" href="{% url 'about' %}">
                                        <img src="{% static 'graphics/info_btn.svg' %}" width="35" height="auto"
                                                aria-label="Information">
                                        </a>
                                </li>
                                <li class="nav-item">
                                        <a class="nav-link" href="{% url 'help' %}">
                                        <img src="{% static 'graphics/help_btn.svg' %}" width="35" height="auto" 
                                        aria-label="Help">
                                        </a>
                                </li>
                        </ul>
                </div>
                </nav>
        </div>
        {% endblock %}

        {% block content %}
        <div class="container-fluid px-5">
                <form method="post" novalidate>
                        {% csrf_token %}

                        {% if form.non_field_errors %}
                        <div class="row p-0 align-items-end mt-3 mb-1">
                                <div class="col-12">
                                {{ form.non_field_errors }}
                                </div>
                        </div>
                        {% endif %}

                        <div class="row p-0 align-items-end mt-5 mb-1">

                                <div class="col-md-7 col-12 mb-1">

                                        <div class="row justify-content-start">

                                                <div class="col-12">
                                                {{ form.project_name.errors }}
                                                <div class="input-group">
                                                        <div class="input-group-text" style="background: none; border: none; padding: 0;">
                                                                <img src="{% static 'graphics/edit_btn.svg' %}" width="30" height="auto"
                                                                        alt="">
                                                        </div>
                                                        {{ form.project_name }}
                                                </div>
                                                </div>
                                        </div>
                                </div>

                                <div class="col-md-5 col-12">

                                        <div class="row justify-content-end">

                                                <div class="col mb-1" style="display: flex; justify-content: end;">
                                                        <label for="example" class="form-label">Load example:</label>
                                                        <select class="form-select" name="example-select-field" id="example"
                                                                style="border-radius: 0px; border-color: #212529;">
                                                                <option selected>---</option>
                                                                <option value="quick-101000">Quick test (101000)</option>
                                                                <option value="printing-101000">Printing (101000)</option>
                                                                <option value="mountain-101000">Mountain (101000)</option>
                                                                <option value="wind-101000">North Wind (101000)</option>
                                                        </select>
                                                </div>

                                                <div class="col mb-1" style="display: flex; justify-content: end;">
                                                        <button type="button" id="save-project-button" class="btn btn-light btn-outline-dark text-nowrap"
                                                                style="margin-inline: .5rem;" onclick="saveProject()">
                                                                <img src="{% static 'graphics/download_btn.svg' %}" width="20" height="auto"
                                                                alt=""> Save project
                                                        </button>
                                                        <button type="button" id="load-project-button" class="btn btn-light btn-outline-dark text-nowrap"
                                                                onclick="loadProject()">
                                                                <img src="{% static 'graphics/upload_btn.svg' %}" width="20" height="auto"
                                                                alt=""> Load project
                                                        </button>
                                                </div>
                                        </div>
                                </div>
                        </div>

                        <div class="p-3 border border-dark">
                                <div class="row pt-5 px-3">
                                        <div class="col">
                                                <h2>Input</h2>
                                        </div>
                                </div>

                                <div class="row align-items-start justify-content-evenly mt-3 pb-3 px-5 input-fields">
                                
                                        <div class="col-lg-4 col-md-12 col-12 mb-3">
                                                {{ form.text_input.errors }}
                                                <label for="text-input-field" class="form-label">Text:</label>
                                                {{ form.text_input }}
                                                <button type="button" id="save-text-input-button" class="btn btn-light btn-outline-dark btn-sm"
                                                onclick="saveTextInput()">
                                                <img src="{% static 'graphics/download_btn.svg' %}" width="20" height="auto"
                                                        aria-label="Save text input">
                                                </button>
                                        </div>

                                        <div class="col-lg-4 col-md-6 col-12 mb-3">
                                                {{ form.ipa_input.errors }}
                                                <label for="ipa-input-field" class="form-label">IPA:</label>
                                                {{ form.ipa_input }}
                                                <button type="button" id="save-ipa-input-button" class="btn btn-light btn-outline-dark btn-sm"
                                                onclick="saveIpaInput()">
                                                <img src="{% static 'graphics/download_btn.svg' %}" width="20" height="auto"
                                                        aria-label="Save IPA input">
                                                </button>
                                        </div>

                                        <div class="col-lg-4 col-md-6 col-12 mb-3">
                                                <legend>Insert IPA symbol:</legend>
                                                <div class="border border-secondary px-4 py-4" id="ipa-chart" name="ipa-chart" style="max-height: 550px; overflow-y: auto;">
                                                        <div class="row" id="ipa-symbol-set">
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">!</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">"</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">'</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">(</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">)</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">,</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">-</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">.</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">:</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">;</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">?</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button"
                                                                                class="btn btn-light btn-ipa">SIL0</button></div>
                                                                <div class="col" style="padding: 0rem;"><button type="button"
                                                                                class="btn btn-light btn-ipa">SIL1</button></div>
                                                                <div class="col" style="padding: 0rem;"><button type="button"
                                                                                class="btn btn-light btn-ipa">SIL2</button></div>
                                                                <div class="col" style="padding: 0rem;"><button type="button"
                                                                                class="btn btn-light btn-ipa">SIL3</button></div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">[</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">]</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">aɪ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">aʊ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">b</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">d</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">dʒ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">eɪ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">f</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">h</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">i</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">j</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">k</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">l</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">m</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">n</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">oʊ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">p</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">r</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">s</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">t</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">tʃ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">u</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">v</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">w</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">z</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">æ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ð</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ŋ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɑ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɔ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɔr</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɔɪ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ə</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ər</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɛ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɛr</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɡ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɪ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ɪr</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʃ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʊ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʊr</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʌ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʌr</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ʒ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">θ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">—</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">-</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">0</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">1</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">2</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">-</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ː</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">ˑ</button>
                                                                </div>
                                                                <div class="col" style="padding: 0rem;"><button type="button" class="btn btn-light btn-ipa">˘</button>
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                        </div>

                        <div class="mt-2 p-3 border border-dark">
                                <div class="row pt-5 px-3">
                                        <div class="col">
                                                <h2>Settings</h2>
                                        </div>
                                </div>

                                <div class="row justify-content-start align-items-end mt-3 pb-3 px-5">
                                        <div class="col-12 mt-3">
                                                <label for="model-select-field" class="form-label">Model:
                                                        <select class="form-select" name="model-select-field" id="model-select-field"
                                                                style="border-radius: 0px; border-color: #212529;">
                                                                <option value="101000" selected>101000</option>
                                                                <option value="6208-IPA-3500">6208 IPA 3500</option>
                                                                <option value="MagK-IPA-6400">MagK IPA 6400</option>
                                                                <option value="TZ-IPA-6000">TZ IPA 6000</option>
                                                        </select>
                                                </label>

                                                {{ form.voice.errors }}
                                                <label for="voice-select-field" class="form-label">Voice:
                                                {{ form.voice }}
                                                </label>
                                        </div>
                                </div>
                        </div>

                        <div class="mt-2 p-3 border border-dark mb-3">
                                <div class="row pt-5 px-3">
                                        <div class="col">
                                                <h2>Output</h2>
                                        </div>
                                </div>

                                <div class="row justify-content-start align-items-end mt-3 mb-1 pb-3 px-5">
                                        <div class="col-12 mt-3">
                                                {{ form.sentence.errors }}
                                                <label for="sentence-select-field" class="form-label">Sentence:
                                                {{ form.sentence }}
                                                </label>
                                        </div>
                                </div>

                                <div class="row justify-content-start align-items-end pb-3 px-5">
                                        <div class="col-12">
                                                {% if task_queued == True %}
                                                <div id="progress">
                                                        <p style="margin-top: 1rem;">
                                                                <img src="{% static 'graphics/loading.webp' %}" alt="" 
                                                                width="25" height="25"> Synthesizing, please wait. 
                                                                This can take a few minutes.
                                                        </p>
                                                </div>
                                                <script>
                                                        document.addEventListener('DOMContentLoaded', function () {
                                                                var urls = {
                                                                        audioUrl: "{{ audio_url }}",
                                                                        taskStatusUrl: "{% url 'task_status' %}",
                                                                        helpUrl: "{% url 'help' %}",
                                                                        loadingImageUrl: "{% static 'graphics/loading.webp' %}",
                                                                };
                                                                var sessionKey = "{{ session_key }}";

                                                                updateAndSchedule(sessionKey, urls);
                                                        });
                                                </script>

                                                {% elif session_key == "_failed" %}
                                                <button id="synthesize-button" class="btn btn-light btn-outline-dark mb-1" type="submit"
                                                style="margin-right: 3rem;">Synthesize</button>

                                                <p style="margin-top: 1rem;">
                                                        Synthesis failed. Please make sure you followed the
                                                        <a href="{% url 'help' %}">guidelines</a> and try again.
                                                        If the problem persists, please contact the
                                                        <a href="https://github.com/ntlprzybysz/synthesis-gui">maintainer</a>.
                                                </p>

                                                {% else %}
                                                <button id="synthesize-button" class="btn btn-light btn-outline-dark mb-1"
                                                        type="submit">Synthesize</button>
                                                {% endif %}
                                        </div>
                                </div>
                        </div>
                </form>
        </div>
        {% endblock %}

        <div class="footer col-12 justify-content-start">
                <span class="mb-3 mb-md-0 text-body-secondary">© Copyright 2023,
                        <a href="https://stefantaubert.com/">Stefan Taubert</a> and
                        <a href="https://www.linkedin.com/in/ntl-przybysz/">Natalia Przybysz</a>.
                </span>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>

</html>